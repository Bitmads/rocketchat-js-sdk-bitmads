{"version":3,"file":"driver.js","sourceRoot":"","sources":["../../../src/lib/drivers/driver.ts"],"names":[],"mappings":";;AAsDA,IAAY,SAGX;AAHD,WAAY,SAAS;IACpB,0BAAa,CAAA;IACb,wBAAW,CAAA;AACZ,CAAC,EAHW,SAAS,GAAT,iBAAS,KAAT,iBAAS,QAGpB;AACD,uBAAuB;AAEvB,MAAM,sBAAsB,GAAG,sBAAsB,CAAA;AACrD,MAAM,kBAAkB,GAAG,iBAAiB,CAAA","sourcesContent":["/**\n * @module driver\n * Provides high-level helpers for DDP connection, method calls, subscriptions.\n */\nimport ClientRest from '../api/Client'\n\nimport { EventEmitter } from 'tiny-events'\nimport { Message } from '../message'\nimport { logger as Logger } from '../log'\nimport {\n  ILogger,\n  ISocketOptions,\n  IRespondOptions,\n  ICallback,\n  IMessageCallback,\n  ISubscriptionEvent,\n  IMessage,\n  IMessageMeta,\n  IMessageReceipt,\n  ISubscription,\n  ICredentials,\n  ILoginResult\n} from '../../interfaces'\n\nexport interface IDriver {\n  logger: ILogger\n  connect (options: ISocketOptions): Promise<IDriver>\n  disconnect (): Promise<IDriver>\n  subscribe (topic: string, ...args: any[]): Promise<ISubscription>\n  unsubscribe (subscription: ISubscription): Promise<IDriver>\n  unsubscribeAll (): Promise<IDriver>\n\t// usertyping room-messages deleted messages\n  subscribeRoom (rid: string, ...args: any[]): Promise<ISubscription []>\n  onMessage (cb: ICallback): void\n\n  subscribeNotifyAll (): Promise<any>\n\n  subscribeLoggedNotify (): Promise<any>\n\n  subscribeNotifyUser (): Promise<any>\n\n  subscribeNotifyUser (): Promise<IDriver>\n\n  login (credentials: ICredentials, args?: any): Promise<any>\n\n  on (event: string, listener: Function): EventEmitter\n  once (event: string, listener: Function): EventEmitter\n  off (event?: string, listener?: Function): EventEmitter\n  emit (event: string, ...args: any[]): boolean\n  listeners (event: string): Function[]\n  removeAllListeners (event?: string): Function[]\n  hasListeners (event: string): boolean\n}\n\nexport enum Protocols {\n\tMQTT = 'mqtt',\n\tDDP = 'ddp'\n}\n/** Collection names */\n\nconst _messageCollectionName = 'stream-room-messages'\nconst _messageStreamName = '__my_messages__'\n"]}